<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #map {
            width: 100%;
            height: 500px;
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQ5UUt1iKjx6RfUI7m499iuut4L9-kYb0&callback=initMap"></script>
    <script>
        const pos_name = ["台北車站", "微風廣場", "饒河夜市", "台北商業大學", "國父紀念館", "西門町"];
        const locations = [
          { lat: 25.047818683109526, lng:  121.51716176772814 },
          { lat: 25.047255292560784, lng: 121.54451472848397 },
          { lat: 25.051194504521117, lng: 121.57749929465365 },
          { lat: 25.04328594369974, lng: 121.52485415232402 },
          { lat: 25.040283309449343, lng: 121.5603095676654 },
          { lat: 25.043066963239568, lng: 121.50770157931184 }
        ];

        function initMap() {
            // The location of Uluru
            const taipei_city = { lat: 25.047818683109526, lng:  121.51716176772814 };
            // The map, centered at Uluru
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 18,
                center: taipei_city,
            });

            const img = "img/placeholder.png";
            for(let i = 0; i < locations.length; i++){
                const marker = new google.maps.Marker({
                    position: locations[i],
                    map: map,
                    title:pos_name[i],
                    icon: img
                });

                const infowindow = new google.maps.InfoWindow({
                content:pos_name[i],
                ariaLabel: pos_name[i]
                });
            
                marker.addListener("click", () => {
                    infowindow.open({
                    anchor: marker,
                    map
                    });
                });
            }
        };

        window.initMap = initMap;


        // function initMap(){
        //     const map = new google.maps.Map(document.getElementById("map"), {
        //         zoom: 14,
        //         center: { lat: 25.046431525811414, lng: 121.51747250593631 },
        //         disableDefaultUI: true
        //     });
        //     // 創建標記
        //     const markers = locations.map((position, i) => {
        //         return new google.maps.Marker({
        //         position,
        //         label: `${i + 1}` // 使用數字作為標記的標籤
        //         });
        //     });

        //     // 創建叢集標記
        //     const markerCluster = new markerClusterer.MarkerClusterer({ map, markers });
        // }

        // // 載入地圖
        // initMap();



        // var locations = [
        //     { name: 'taipei101', price: '350NT', lat: 25.0339031, lng: 121.5623212 },
        //     { name: 'airport', price: '150NT', lat: 25.063236, lng: 121.5503405 },
        //     { name: 'train station', price: '160NT', lat: 25.0455016, lng: 121.5186618 },
        //     { name: 'MRT station', price: '100NT', lat: 25.0625538, lng: 121.5171593 },
        // ];
        // var image = {
        //     url: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
        //     size: new google.maps.Size(20, 32),
        //     origin: new google.maps.Point(0, 0),
        //     anchor: new google.maps.Point(0, 32)
        // };
        // function initialize() {
        //     var markerCenter = new google.maps.LatLng(25.0625938, 121.5308613);
        //     var mapOptions = {
        //         zoom: 14,
        //         center: markerCenter,
        //         disableDefaultUI: true
        //     };
        //     map = new google.maps.Map(document.getElementById('map'),
        //         mapOptions);
        //     marker = new google.maps.Marker({
        //         map: map,
        //         animation: google.maps.Animation.DROP,
        //         position: markerCenter
        //     });
        //     for (var i = 0; i < locations.length; i++) {
        //         var item = locations[i];
        //         var infowindow = new google.maps.InfoWindow();
        //         var marker = new google.maps.Marker({
        //             position: { lat: item.lat, lng: item.lng },
        //             map: map,
        //             title: item.name,
        //             icon: image,
        //             data: 'Go to ' + item.name + '<br/> Taxi price: ' + item.price
        //         });
        //         marker.addListener('click', function () {
        //             infowindow.setContent(this.data);
        //             infowindow.open(map, this);
        //         });
        //     }
        // }

        // google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</body>

</html>